âœ… å–®å…ƒæ¸¬è©¦ï¼ˆUnit Testingï¼‰
ğŸ“Œ ä»€éº¼æ˜¯å–®å…ƒæ¸¬è©¦ï¼Ÿ
å–®å…ƒæ¸¬è©¦æ˜¯é‡å°ç¨‹å¼ä¸­çš„æœ€å°å¯æ¸¬å–®å…ƒï¼ˆé€šå¸¸æ˜¯æ–¹æ³•æˆ–é¡åˆ¥ï¼‰æ‰€æ’°å¯«çš„æ¸¬è©¦ï¼Œç›®çš„æ˜¯ç¢ºä¿å…¶è¡Œç‚ºç¬¦åˆé æœŸã€‚

âœ… å¸¸ç”¨å·¥å…·
å·¥å…·/æ¡†æ¶	èªªæ˜
MSTest		å¾®è»ŸåŸç”Ÿå–®å…ƒæ¸¬è©¦æ¡†æ¶
xUnit		ç¤¾ç¾¤å¸¸ç”¨ï¼Œè¼•é‡ä¸”æ”¯æ´å¤šæ¨£æ¸¬è©¦åŠŸèƒ½
NUnit		æ­·å²æ‚ ä¹…ã€åŠŸèƒ½é½Šå…¨çš„å–®å…ƒæ¸¬è©¦æ¡†æ¶
Moq			æ¨¡æ“¬ç‰©ä»¶ (Mocking) æ¡†æ¶ï¼Œç”¨æ–¼æ¨¡æ“¬ä¾è³´é …

âœ¨ æ’°å¯«å–®å…ƒæ¸¬è©¦çš„æŠ€å·§

å‘½åæ¸…æ¥šçš„æ¸¬è©¦æ–¹æ³•
æ ¼å¼å»ºè­°ï¼šMethodName_StateUnderTest_ExpectedBehavior
ä¾‹ï¼šCalculateTax_NegativeIncome_ThrowsException
Arrange-Act-Assertï¼ˆAAAï¼‰æ¨¡å¼
Arrangeï¼šè¨­å®šåˆå§‹æ¢ä»¶
Actï¼šåŸ·è¡Œè¦æ¸¬è©¦çš„æ–¹æ³•
Assertï¼šé©—è­‰çµæœæ˜¯å¦ç¬¦åˆé æœŸ
ä¿æŒæ¸¬è©¦çš„ç¨ç«‹æ€§
æ¯å€‹æ¸¬è©¦æ‡‰è©²ç¨ç«‹é‹è¡Œï¼Œé¿å…ä¾è³´å¤–éƒ¨ç‹€æ…‹æˆ–é †åºã€‚
ä½¿ç”¨ Mock ç‰©ä»¶
ç”¨ä¾†æ¨¡æ“¬è³‡æ–™åº«ã€APIã€æœå‹™ç­‰å¤–éƒ¨è³‡æºï¼Œè®“æ¸¬è©¦æ›´å¿«é€Ÿä¸”å¯é ã€‚
æ­é… Moq ä½¿ç”¨æ•ˆæœä½³ã€‚
é‚Šç•Œæ¢ä»¶èˆ‡ä¾‹å¤–æ¸¬è©¦
ç¢ºä¿æ¶µè“‹æ­£å¸¸ã€ç•°å¸¸èˆ‡é‚Šç•Œè¼¸å…¥ï¼ˆå¦‚ nullã€ç©ºå­—ä¸²ã€æœ€å¤§/æœ€å°å€¼ï¼‰ã€‚

public class TaxService {
    public decimal CalculateTax(decimal income) {
        if (income < 0) throw new ArgumentException("Income must be non-negative");
        return income * 0.2m;
    }
}

public class TaxServiceTests {
    [Fact]
    public void CalculateTax_PositiveIncome_ReturnsCorrectTax() {
        var service = new TaxService();

        var result = service.CalculateTax(1000);

        Assert.Equal(200, result);
    }

    [Fact]
    public void CalculateTax_NegativeIncome_ThrowsException() {
        var service = new TaxService();

        Assert.Throws<ArgumentException>(() => service.CalculateTax(-100));
    }
}


ğŸ› ï¸ é™¤éŒ¯æŠ€å·§ï¼ˆDebugging Tipsï¼‰
ğŸ“Œ å¸¸ç”¨å·¥å…·
Visual Studio çš„ã€Œä¸­æ–·é»ï¼ˆBreakpointï¼‰ã€
å³æ™‚ç›£çœ‹ï¼ˆWatchï¼‰ å’Œ è‡ªå‹•è¦–çª—ï¼ˆAutosï¼‰
å³æ™‚ç·¨è¼¯ï¼ˆEdit and Continueï¼‰
åµéŒ¯è¼¸å‡ºï¼ˆDebug.WriteLineï¼‰
æ¢ä»¶ä¸­æ–·é»ï¼ˆConditional Breakpointï¼‰

âœ¨ é™¤éŒ¯å¯¦ç”¨æŠ€å·§

è¨­å®šæ¢ä»¶ä¸­æ–·é»
åªåœ¨ç‰¹å®šæ¢ä»¶æ»¿è¶³æ™‚ä¸­æ–·ï¼Œä¾‹å¦‚ï¼šx == 5
ä½¿ç”¨å³æ™‚ç›£çœ‹ï¼ˆWatchï¼‰è®Šæ•¸å€¼
å¯ä»¥å³æ™‚æŸ¥çœ‹æˆ–ä¿®æ”¹è®Šæ•¸å€¼ã€‚
é€æ­¥åŸ·è¡Œï¼ˆStep Over / Step Into / Step Outï¼‰
Step Intoï¼ˆF11ï¼‰ï¼šé€²å…¥æ–¹æ³•å…§éƒ¨
Step Overï¼ˆF10ï¼‰ï¼šåŸ·è¡Œæ•´è¡Œï¼Œä¸é€²å…¥æ–¹æ³•
Step Outï¼ˆShift+F11ï¼‰ï¼šè·³å‡ºç›®å‰æ–¹æ³•
ä½¿ç”¨ Debug.WriteLine() è¿½è¹¤ç¨‹å¼æµç¨‹
æ›¿ä»£åŠ å…¥ä¸­æ–·é»ï¼Œç°¡æ˜“é™¤éŒ¯ç”¨ã€‚
Debug.WriteLine("Current value of x: " + x);
å•Ÿç”¨ä¾‹å¤–ä¸­æ–·ï¼ˆBreak on All Exceptionsï¼‰
å¯åœ¨ã€Œä¾‹å¤–è¨­å®šã€ä¸­å‹¾é¸ï¼Œè®“ç¨‹å¼åœ¨ä»»ä½•ä¾‹å¤–ç™¼ç”Ÿæ™‚ä¸­æ–·ã€‚

ğŸ§  å°æŠ€å·§è£œå……

å°æ–¼å¤šåŸ·è¡Œç·’æˆ–éåŒæ­¥æ–¹æ³•ï¼Œå–„ç”¨ã€ŒParallel Stackã€è¦–çª—ã€‚
ç†Ÿæ‚‰ Visual Studio çš„ã€Œè¨ºæ–·å·¥å…·ã€å¯ä»¥å¹«åŠ©è¨˜æ†¶é«”èˆ‡æ•ˆèƒ½åˆ†æã€‚
ä½¿ç”¨ nameof() å‡½æ•¸å¯æ¸›å°‘ç¡¬ç·¨ç¢¼éŒ¯èª¤ï¼š
throw new ArgumentNullException(nameof(myParam));

ğŸ¯ å–®å…ƒæ¸¬è©¦çš„åŸå‰‡
å–®å…ƒæ¸¬è©¦çš„ç›®æ¨™æ˜¯æ¸¬è©¦é‚è¼¯ï¼Œè€Œä¸æ˜¯è¼¸å…¥/è¼¸å‡ºè¨­å‚™æœ¬èº«ã€‚

âœ… å¯æ¸¬æ–¹å¼ï¼šæŠ½è±¡è¼¸å…¥ä¾†æº
ä½ å¯ä»¥ç”¨ã€Œä¾è³´æ³¨å…¥ã€æˆ–ã€Œä»‹é¢æŠ½è±¡ã€ä¾†åŒ…è£è¼¸å…¥ï¼Œç„¶å¾Œåœ¨æ¸¬è©¦æ™‚ç”¨å‡è³‡æ–™å–ä»£å®ƒã€‚
public interface IInputProvider {
    string ReadInput();
}

public class ConsoleInputProvider : IInputProvider {
    public string ReadInput() {
        return Console.ReadLine();
    }
}

public class NameService {
    private readonly IInputProvider _inputProvider;

    public NameService(IInputProvider inputProvider) {
        _inputProvider = inputProvider;
    }

    public string GetUpperCaseName() {
        var name = _inputProvider.ReadInput();
        return name?.ToUpperInvariant();
    }
}

public class NameServiceTests {
    [Fact]
    public void GetUpperCaseName_ReturnsUpperCase() {
        // Arrange
        var mockInput = new Mock<IInputProvider>();
        mockInput.Setup(x => x.ReadInput()).Returns("john");

        var service = new NameService(mockInput.Object);

        // Act
        var result = service.GetUpperCaseName();

        // Assert
        Assert.Equal("JOHN", result);
    }
}


æ•´é«”æµç¨‹åœ–ï¼ˆç°¡ç•¥ï¼‰
[Console.ReadLine()]
      â†“ï¼ˆæŠ½è±¡ï¼‰
[IInputProviderä»‹é¢]
      â†“ï¼ˆæ³¨å…¥ï¼‰
[æ¥­å‹™é‚è¼¯é¡åˆ¥ï¼Œä¾‹å¦‚ NameService]
      â†“ï¼ˆå¯æ¸¬ï¼‰
[å–®å…ƒæ¸¬è©¦é€é Mock æ¨¡æ“¬è¼¸å…¥]

ğŸ“Œ çµè«–
éšæ®µ			å·¥å…·/æŠ€è¡“				ç›®çš„
è¼¸å…¥æŠ½è±¡åŒ–		ä»‹é¢ (IInputProvider)	éš”é›¢èˆ‡ Console çš„ä¾è³´
çœŸå¯¦è¼¸å…¥		ConsoleInputProvider	çœŸæ­£å¾éµç›¤è®€å–è¼¸å…¥
å¯æ¸¬é‚è¼¯å°è£	NameService ç­‰é¡åˆ¥		å°‡é‚è¼¯å°è£é€²è¡Œå–®å…ƒæ¸¬è©¦
æ¸¬è©¦å¯¦ä½œ		xUnit + Moq				æ¨¡æ“¬è¼¸å…¥è³‡æ–™ï¼Œé©—è­‰é‚è¼¯æ­£ç¢ºæ€§
